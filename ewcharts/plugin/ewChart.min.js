"use strict";function ewCharts(t){if(!Array.isArray(t.color)||t.color.length!==t.data.Y.length)for(var e=t.data.Y.length-t.color.length,r=0;r<e;r++)t.color.push("#ffffff");t.type="bar"===t.type?t.type:"bar",this.options=t,this.init(t)}ewCharts.prototype.init=function(t){var e=this.setStyle();switch(t.type){case"bar":this.resetAllCharts(this.$(t.el)),this.resetChartsX(t.data.X,e),this.resetChartsY(t.data.Y,e),this.resetChartsLegend(t.data,e)}},ewCharts.prototype.resetAllCharts=function(t){return t.innerHTML="<ew-charts-body><ew-charts-legend></ew-charts-legend><ew-charts-x></ew-charts-x><ew-charts-y></ew-charts-y><ew-charts-zone></ew-charts-zone></ew-charts-body>",t.classList.add("ew-charts"),t},ewCharts.prototype.resetChartsX=function(t,e){for(var r=this.$("ew-charts-x"),a="",s=t.length,o=0;o<s;o++)a+="<div class=x-"+(o+1)+" style='letter-spacing:2px;'>"+t[o]+"</div>";r.innerHTML=a;for(var n=this.$("ew-charts-x > div",!1),i=[],h=0;h<s;h++)i.push(n[h].offsetWidth);for(var l=Math.max.apply(null,i),c=parseInt(100/s),d=c/2,p=0;p<s;p++)e("ew-charts-x > div.x-"+(p+1)+"{width:"+l+"px;left:calc("+(c*(p+1)-d)+"% - "+d+"px)}",p)},ewCharts.prototype.resetChartsY=function(t,e){for(var r=[],a=this.$("ew-charts-y"),s="",o=this.options.data.keyName,n=Array.isArray(o)&&2===o.length?o[1]:"value",i=0,h=t.length;i<h;i++)r=r.concat(t[i][n]);var l=Math.max.apply(null,r);/\./.test(String(l))&&(l=Math.ceil(l));for(var c=null,d=null,p=[1e6,1e5,1e4,1e3,100,10],u=null,f=0,v=p.length;f<v;f++)if(l>=p[f]){u=p[f];break}u||(u=1),c=u>1?Math.ceil(l/(u/2)):Math.ceil(l/u),d=u>1?c*(u/2):c*u;for(var w=0;w<c;w++)s+="<div class='y-"+(w+1)+"'>"+d/c*(w+1)+"</div>";a.innerHTML=s;for(var g=0;g<c;g++)e("ew-charts-y > div.y-"+(g+1)+"{ bottom:calc("+parseInt(100/c*(g+1))+"% - 16px);}");this.resetChartsZone(c,n,d,e)},ewCharts.prototype.resetChartsZone=function(t,e,r,a){var s=this;a("ew-charts-zone { background:repeating-linear-gradient(180deg,#535456 0%,#724109 "+100/t+"%,#334455 calc("+100/t+"% + 1px),#e0e1e5 "+100/t*2+"%)}",t+1);var o=this.options.data.X.length,n=this.$("ew-charts-zone"),i="",h=parseInt(100/o)-2,l=0,c=this.options.data.Y.length,d=0,p=null;c<3?(d=28,l=(100-30*c)/2,p=30):c>=3&&c<6?(d=18,l=(100-20*c)/2,p=20):(d=100/(c-1),l=100/c,p=0);for(var u="",f=0;f<c;f++){var v=this.lightColor(this.options.color[f]),w=null;w=p>0?p*f+l:l*f,a("ew-charts-zone > div bar.bar-"+(f+1)+"{width:"+d+"%;background-color:"+this.options.color[f]+";border-color:"+v+";left:"+w+"%;box-shadow:0 0 5px "+this.options.color[f]+";}",f),a("ew-charts-zone > div bar.bar-"+(f+1)+":hover{box-shadow:0 0 15px "+this.options.color[f]+";}"),u+='<bar class="bar-'+(f+1)+'"></bar>'}a("ew-charts-zone > div[class*='zone-']{ width:"+h+"%;margin-left:1%;margin-right:1%;}");for(var g=0;g<o;g++)i+="<div class='zone-"+(g+1)+"'>"+u+"</div>";n.innerHTML=i;var y=this.options.data.Y;setTimeout(function(){for(var t=0;t<o;t++)for(var i=0;i<c;i++){var h=n.children[t].children[i];h.classList.add("dataId-"+(t+1)+"-"+(i+1)),h.setAttribute("data-value",y[i][e][t]),a("ew-charts-zone > div bar.dataId-"+(t+1)+"-"+(i+1)+"{height:"+y[i][e][t]/r*100+"%;}",i)}var l=s.$("ew-charts-zone div bar",!1);[].slice.call(l).forEach(function(t){t.onmouseenter=function(){var t=this.getAttribute("data-value");this.innerHTML="<span class='animation'>"+t+"</span>"},t.onmouseleave=function(){this.innerHTML=""}})},0)},ewCharts.prototype.resetChartsLegend=function(t,e){for(var r="",a=Array.isArray(t.keyName)&&2===t.keyName.length?t.keyName[0]:"label",s=0,o=t.Y.length;s<o;s++){var n=this.lightColor(this.options.color[s]);e("ew-charts-legend > i.leg-"+(s+1)+"{ background:"+this.options.color[s]+";border-color:"+n+";}",s),r+="<i class='leg-"+(s+1)+"'></i><span>"+t.Y[s][a]+"</span>"}this.$("ew-charts-legend").innerHTML=r},ewCharts.prototype.$=function(t,e){return e=t.indexOf("#")>-1||("boolean"!=typeof e||e),e?document.querySelector(t):document.querySelectorAll(t)},ewCharts.prototype.setStyle=function(){for(var t=this.$("link",!1),e=0,r=0,a=t.length;r<a;r++)/\w+\.css/.test(t[r].getAttribute("href"))&&(e=r);return t[e].sheet.insertRule.bind(t[e].sheet)},ewCharts.prototype.lightColor=function(t){var e=function(t){var e=Math.round(1.6*parseInt(t,16));return(e>=255?255:e<=16?16:e).toString(16)};return"#"+e(t.slice(1,3))+e(t.slice(3,5))+e(t.slice(5,7))};